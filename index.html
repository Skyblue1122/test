<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Firebase 測試頁面</title>
</head>
<body>
  <h1>Firebase 測試</h1>

  <input type="text" id="messageInput" placeholder="輸入要儲存的訊息">
  <button onclick="writeData()">寫入資料</button>
  <button onclick="readData()">讀取資料</button>

  <h3>讀取結果：</h3>
  <div id="output"></div>

  <!-- ✅ 只載入 compat 版本 -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBgln47TB5KK4u8OPifOPcjav0_S1Q-ZUs",
      authDomain: "test-4dcf0.firebaseapp.com",
      databaseURL: "https://test-4dcf0-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "test-4dcf0",
      storageBucket: "test-4dcf0.appspot.com",
      messagingSenderId: "252652582147",
      appId: "1:252652582147:web:96099e11f4fe506c44a536",
      measurementId: "G-BRFM6WY3NF"
    };

    // 初始化 Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    function writeData() {
      const message = document.getElementById('messageInput').value;
      database.ref('test/message').set(message)
        .then(() => alert("✅ 資料已寫入 Firebase！"))
        .catch((error) => alert("❌ 寫入錯誤：" + error));
    }

    function readData() {
      database.ref('test/message').once('value')
        .then(snapshot => {
          const data = snapshot.val();
          document.getElementById('output').innerText = data || "尚未有資料";
        })
        .catch((error) => alert("❌ 讀取錯誤：" + error));
    }
  </script>
</body>
</html>
